# Инструкция по работе с Git и GitHub

## Основные команды Git

### Просмотр истории версий

```bash
# Посмотреть последние 10 коммитов
git log --oneline -10

# Посмотреть историю с графиком
git log --graph --oneline --all -15

# Посмотреть детали конкретного коммита
git show 0fd0e6a

# Посмотреть, что изменилось в последнем коммите
git show --stat HEAD
```

### Откат изменений

#### 1. Откат последнего коммита (если еще не отправили в GitHub):
```bash
git reset --soft HEAD~1  # Откатить коммит, но оставить изменения
git reset --hard HEAD~1  # Откатить коммит и удалить изменения (ОСТОРОЖНО!)
```

#### 2. Откат конкретного файла к предыдущей версии:
```bash
git checkout HEAD~1 -- путь/к/файлу.tsx  # Вернуть файл к версии из предыдущего коммита
```

#### 3. Просмотр изменений между версиями:
```bash
git diff HEAD~1 HEAD  # Что изменилось в последнем коммите
git diff d77beda 0fd0e6a  # Сравнить два конкретных коммита
```

#### 4. Восстановление удаленного файла:
```bash
git checkout HEAD -- путь/к/удаленному/файлу.tsx
```

### Создание резервной копии (ветка)

```bash
# Создать ветку-копию перед экспериментами
git branch backup-перед-изменениями

# Переключиться на ветку
git checkout backup-перед-изменениями

# Вернуться на основную ветку
git checkout main

# Удалить ветку (если не нужна)
git branch -D backup-перед-изменениями
```

### Просмотр истории конкретного файла

```bash
# История изменений файла
git log -- app/page.tsx

# Кто и когда менял каждую строку
git blame app/page.tsx
```

### Откат на сервере (если что-то сломалось)

```bash
ssh root@91.229.8.154
cd /var/www/gazobeton-online
git log --oneline -5  # Посмотреть последние коммиты
git checkout d77beda  # Вернуться к конкретному коммиту
npm run build
pm2 restart gazobeton-online
```

### Полезные команды для ежедневной работы

```bash
# Посмотреть, что изменилось (до коммита)
git status
git diff

# Посмотреть историю с красивым форматированием
git log --oneline --graph --all --decorate

# Найти коммит по тексту в сообщении
git log --grep="мобильная"

# Посмотреть изменения в конкретном коммите
git show 0fd0e6a
```

## Где хранится история

1. **Локально**: в папке `.git` в корне проекта (скрытая папка)
2. **На GitHub**: в облаке — можно посмотреть на сайте github.com/bodryagov/gazobeton-online
3. **На сервере**: после `git pull` история синхронизируется

## Практический пример: восстановление удаленного файла

```bash
# 1. Посмотреть, что удалено
git status

# 2. Восстановить файл из последнего коммита
git checkout HEAD -- app/important-file.tsx

# Или восстановить из конкретного коммита
git checkout d77beda -- app/important-file.tsx
```

